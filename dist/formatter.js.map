{"version":3,"sources":["../src/formatter.js"],"names":[],"mappings":"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","file":"formatter.js","sourcesContent":["import dateFormat from './dateFormat';\n\nexport default class Formatter {\n  constructor(value) {\n    this.value = value;\n  }\n\n  toString() {\n    //apply auto format\n    if (this.value instanceof Date && !isNaN(this.value.valueOf())) {\n      return this.date('default').toString();\n    }\n    return String(this.value);\n  }\n\n  valueOf() {\n    return this.value;\n  }\n}\n\nextend('date', function(input, pattern){\n  return dateFormat(input, pattern);\n});\n\nextend('number', function(input, fractionSize){\n  if(fractionSize == undefined || fractionSize<0){\n    fractionSize = 2;\n  }\n  let num = new Number(input);\n  if(isNaN(num.valueOf()) ){\n    return input;\n  }\n  if(!isFinite(num.valueOf())){\n    return num.valueOf() < 0 ? '-∞' : '∞';\n  }\n  return num.toFixed(fractionSize).replace(/(\\d)(?=(\\d{3})+\\.)/g, '$1,');\n});\n\nextend('bytes', function (input, fractionSize,defaultValue) {\n  var num = new Number(input);\n  if(fractionSize == undefined || fractionSize<0){\n    fractionSize = 2;\n  }\n  defaultValue = defaultValue || '--';\n  if(isNaN(num.valueOf()) || num < 0){\n    return defaultValue;\n  }\n  if(num < 1024){\n    return num.toFixed(0) + '';\n  }\n  if(num < 1024 * 1024){\n    return (num / 1024).toFixed(fractionSize) + 'K';\n  }\n  if(num < 1024 * 1024 * 1024){\n    return (num / (1024 * 1024)).toFixed(fractionSize) + 'M';\n  }\n  return (num / (1024 * 1024 * 1024)).toFixed(fractionSize) + 'G';\n});\n\nconst concat = Array.prototype.concat;\nexport function extend(name, fn) {\n  if (typeof name == 'string' && typeof fn == 'function') {\n    Formatter.prototype[name] = function() {\n      var args = concat.apply([this.valueOf()],arguments);\n      this.value = fn.apply(null, args);\n      return this;\n    };\n  }\n}\n"]}